# 🤖 AIチャットボット 手元確認手順書

## 📁 現在の実装状況

### ✅ 実装済みファイル
- `contact.html` - チャットボットUI統合済み
- `css/chatbot.css` - チャットボットスタイル
- `js/chatbot.js` - チャットボットロジック
- `api/chat.js` - Vercel Serverless Function
- `vercel.json` - Vercel設定ファイル
- `debug.html` - デバッグ用ページ

### 🔧 実装内容
- **フロントエンド**: チャットボットUI、フォーム連携、ローカルストレージ
- **バックエンド**: Vercel Serverless Function + OpenAI API
- **デバッグ機能**: リアルタイムログ、APIテスト、初期化確認

---

## 🚀 手元での確認手順

### **ステップ1: ローカルサーバーで基本動作確認**

```bash
# プロジェクトディレクトリで実行
cd /Users/takakuraitsuki/Documents/GitHub/portfolio-corporate-site-ai

# 簡単なHTTPサーバーを起動
python3 -m http.server 8000
# または
npx serve .
```

**確認URL:**
- メインページ: `http://localhost:8000/contact.html`
- デバッグページ: `http://localhost:8000/debug.html`

### **ステップ2: チャットボット基本動作確認**

#### **2-1. チャットボット表示確認**
1. `contact.html`を開く
2. 右側にチャットボットウィンドウが表示される
3. 「💬 お問い合わせをサポートします」メッセージが表示される
4. クイックアクションボタン（サービス提案、メッセージ下書き、使い方ガイド）が表示される

#### **2-2. フォーム連携確認**
1. フォームに以下を入力：
   - お名前: `テスト太郎`
   - 会社名: `テスト株式会社`
   - メールアドレス: `test@example.com`
   - サービス: `AI導入コンサルティング`
   - メッセージ: `AI導入について相談したいです`
2. チャットボットで「サービス提案」ボタンをクリック
3. フォームの内容が反映された提案が表示される

#### **2-3. ローカルストレージ確認**
1. チャットボットでメッセージを送信
2. ブラウザの開発者ツール（F12）を開く
3. Application > Local Storage > `http://localhost:8000`
4. `chatbot_messages`キーでメッセージ履歴が保存されている

### **ステップ3: デバッグページでの詳細確認**

#### **3-1. デバッグページアクセス**
1. `http://localhost:8000/debug.html`にアクセス
2. 左上のデバッグパネルが表示される

#### **3-2. 各テストの実行**

**🔍 APIテスト**
```
ボタン: 「APIテスト」
期待結果: Status: 404 (ローカルではAPIエンドポイントが存在しないため)
実際結果: ネットワークエラーまたは404エラー
```

**🤖 チャットボット初期化テスト**
```
ボタン: 「チャットボット初期化テスト」
期待結果: 
✅ ChatbotAssistant クラスが存在します
✅ チャットボットインスタンスが作成されています
✅ チャットボットコンテナが存在します
```

**📝 フォーム連携テスト**
```
ボタン: 「フォーム連携テスト」
期待結果:
✅ name フィールドが存在します
✅ company フィールドが存在します
✅ email フィールドが存在します
✅ service フィールドが存在します
✅ message フィールドが存在します
```

### **ステップ4: フォールバック機能確認**

#### **4-1. 定型応答の確認**
チャットボットで以下をテスト：

```
入力: "こんにちは"
期待: 挨拶の定型応答

入力: "ありがとう"
期待: 感謝への定型応答

入力: "AIについて教えて"
期待: AI関連の定型応答

入力: "スケジュールについて"
期待: スケジュール関連の定型応答
```

#### **4-2. クイックアクション確認**
```
「サービス提案」ボタン → フォーム内容に基づく提案
「メッセージ下書き」ボタン → フォーム内容を反映した下書き
「使い方ガイド」ボタン → 詳細な使用方法
「ヘルプ」ボタン → ヘルプ情報
```

---

## 🌐 Vercelデプロイ後の確認手順

### **ステップ1: Vercelプロジェクト確認**
1. [Vercel Dashboard](https://vercel.com/dashboard)にアクセス
2. プロジェクト一覧で`portfolio-corporate-site-ai`を確認
3. デプロイステータスが「Ready」であることを確認

### **ステップ2: 環境変数確認**
1. Vercelプロジェクトの「Settings」→「Environment Variables」
2. `OPENAI_API_KEY`が設定されていることを確認
3. 値が`sk-`で始まるOpenAI APIキーであることを確認

### **ステップ3: 本番環境でのテスト**

#### **3-1. メインページテスト**
```
URL: https://your-project.vercel.app/contact.html
確認項目:
- チャットボットが表示される
- フォーム入力が正常に動作する
- チャットボットが応答する
```

#### **3-2. デバッグページテスト**
```
URL: https://your-project.vercel.app/debug.html
テスト実行:
1. 「APIテスト」→ Status: 200 (成功)
2. 「チャットボット初期化テスト」→ 全項目OK
3. 「フォーム連携テスト」→ 全項目OK
```

#### **3-3. AI応答テスト**
```
チャットボットで以下をテスト:
入力: "こんにちは、AI導入について相談したいです"
期待: AIが生成した自然な応答（定型文ではない）

入力: "システム運用について詳しく教えて"
期待: システム運用に関する具体的なAI応答
```

---

## 🔧 トラブルシューティング

### **問題1: チャットボットが表示されない**
```
原因: JavaScriptファイルの読み込みエラー
解決: 
1. ブラウザの開発者ツール（F12）でエラーを確認
2. Network タブでファイル読み込み状況を確認
3. ファイルパスが正しいか確認
```

### **問題2: APIテストで404エラー**
```
原因: Vercelのデプロイが完了していない
解決:
1. Vercelダッシュボードでデプロイ状況を確認
2. vercel.jsonの設定を確認
3. 再度デプロイを実行
```

### **問題3: APIテストで500エラー**
```
原因: OpenAI APIキーが設定されていない
解決:
1. Vercel環境変数でOPENAI_API_KEYを設定
2. APIキーが正しい形式か確認
3. OpenAIアカウントのクレジット残高を確認
```

### **問題4: フォーム連携が動作しない**
```
原因: フォームのID属性とJavaScriptが一致していない
解決:
1. contact.htmlのフォーム要素のIDを確認
2. js/chatbot.jsのgetFormData()メソッドを確認
3. ID属性を一致させる
```

---

## 📊 確認チェックリスト

### **ローカル環境**
- [ ] チャットボットUIが表示される
- [ ] フォーム入力が正常に動作する
- [ ] クイックアクションボタンが動作する
- [ ] 定型応答が表示される
- [ ] ローカルストレージにメッセージが保存される
- [ ] デバッグページの全テストが通る

### **Vercel本番環境**
- [ ] サイトが正常にアクセスできる
- [ ] チャットボットが表示される
- [ ] AI応答が生成される（定型文ではない）
- [ ] APIテストでStatus: 200が返る
- [ ] フォーム送信が正常に動作する
- [ ] モバイル表示が正常に動作する

---

## 🎯 次のステップ

1. **ローカル環境での基本動作確認**
2. **Vercelへのデプロイ（GitHub経由）**
3. **環境変数の設定**
4. **本番環境での動作確認**
5. **問題があればデバッグページで詳細確認**

この手順書に従って確認していただければ、チャットボットの動作状況を完全に把握できます！
